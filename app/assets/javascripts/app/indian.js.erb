var indian = {is: ('fluid' in window ? 'fluid' : 'platform' in window ? 'prism' : false)};

switch(indian.is){
  case 'fluid':
    indian.badge = function(text){
      if(typeof text == 'undefined'){
        return window.fluid.dockBadge;
      } else {
        window.fluid.dockBadge = text;
      }
    };
    indian.notify = function(input){
      window.fluid.showGrowlNotification(input);
    };
    break;
  case 'prism':
    // clear the cache first
    // window.platform.clearPrivateData();
    indian.badge = function(text){
      if(typeof text == 'undefined'){
        return window.platform.icon().dockText;
      } else {
        window.platform.icon().badgeText = text;
      }
    };
    indian.notify = function(input){
      window.platform.showNotification(input.title, input.description, input.icon);
    };
    break;
  default:
    indian.badge = indian.notify = function(){};
}

if(indian.is){

window.document.title = 'âœŒ Reading';
$('head').append('<link rel="stylesheet" href="<%= asset_path 'indian.css' %>" type="text/css">');

$(window).focus(function(){
  indian.badge('');
  $('.post.new').fadeTo('medium', 1).removeClass('new');
});

}
