<%
  if @user.nil? or (logged_in? && current_user.id == @user.id)
    you = "you"
    youre = "you're"
  else
    you = @user.first_name
    youre = "#{you} is"
  end
%>
<h1><a href="/">âœŒ Reading</a></h1>
<% if !logged_in? %>
<h3><span id="lead_in">What <%= youre %> reading. </span>Not what <%= you %> like<%= 's' if @user and @user != current_user %>. Not what <%= you %> find<%= 's' if @user and @user != current_user %> interesting. Just what <%= youre %> reading.</h3>
<% end %>
<div id="welcome" class="section">
<% if logged_in? %>
  <% if current_user.username %>
    <% # TODO this is a complete mess. Clean it up %>
    Hey there <%= link_to current_user.display_name, "/#{current_user.username}/list", :class => 'user' %>.<br>
    <%= link_to "You", "/#{current_user.username}/list", :class => (request.path.split('/')[1] == current_user.username and params[:action] != 'edit' and params[:action] != 'hooks' ? 'active' : '') %>
    - <%= link_to "Everybody", '/everybody', :class => (params[:controller] != 'search' && params[:username] != current_user.username ? 'active' : '') %>
    - <%= render :partial => 'search/form' %>
    - <%= link_to "Settings", "/#{current_user.username}/hooks", :class => (params[:controller] == 'users' and params[:action] == 'edit' ||  params[:action] == 'hooks' ? 'active' : '') %>
    - <%= link_to "Sign Out", signout_path %>
  <% end %>
<% else %>
  Sign up or in with
  <%= link_to provider_span(:twitter), "/auth/twitter" %> or
  <%= link_to provider_span(:facebook), "/auth/facebook" %>.
<% end %>
</div>
