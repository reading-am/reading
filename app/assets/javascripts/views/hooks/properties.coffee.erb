<%
  events = [{
    :text => 'do anything',
    :value => "[\"#{Hook::EVENTS.each_key.to_a.join('","')}\"]",
    :perms => [:write]
  }]
  Hook::EVENTS.each do |event, params|
    params[:value] = "[\"#{event}\"]"
    events << params
  end
%>

reading.define [
  "models/current_user"
], (current_user) ->

  "events":<%= events.to_json %>,
  "providers":[
    {"text":"Facebook", "params":[
      {"text":"account", "options":current_user.get("authorizations").facebook.accounts(), "datatype":"account"},
      {"name":"permission", "options":[{text:"the timeline",value:"publish_actions"},{text:"the wall",value:"publish_stream"}]}
    ]},
    {"text":"Twitter", "params":[
      {"name":"permission", "value":"write", "type":"hidden"},
      {"text":"account", "options":current_user.get("authorizations").twitter.accounts(), "datatype":"account"}
    ]},
    {"text":"Tumblr", "params":[
      {"name":"permission", "value":"write", "type":"hidden"},
      {"text":"account", "options":current_user.get("authorizations").tumblr.accounts(), "datatype":"account"},
      {"text":"blog", "src":"account.places", "options":[{"text":"Loading...","value":""}]}
    ]},
    {"text":"Instapaper", "params":[
      {"name":"permission", "value":"write", "type":"hidden"},
      {"text":"account", "options":current_user.get("authorizations").instapaper.accounts(), "datatype":"account"}
    ]},
    {"text":"Pinboard", "params":[
      {"text":"user", "placeholder":"my_username"},
      {"text":"password", "placeholder": "my_strong_password"}
    ]},
    {"text":"Readability", "params":[
      {"name":"permission", "value":"write", "type":"hidden"},
      {"text":"account", "options":current_user.get("authorizations").readability.accounts(), "datatype":"account"}
    ]},
    {"text":"HipChat", "params":[
      {"text":"room", "placeholder":"My Room Name"},
      {"text":"token", "placeholder":"12345abcdefg67890abcdefg12345a"}
    ]},
    {"text":"Campfire", "value":"tssignals", "params":[
      {"name":"permission", "value":"write", "type":"hidden"},
      {"text":"account", "options":current_user.get("authorizations").tssignals.accounts(), "datatype":"account"}
      {"text":"room", "src":"account.places", "options":[{"text":"Loading...","value":""}]}
    ]},
    {"text":"Kippt", "params":[
      {"name":"permission", "value":"write", "type":"hidden"},
      {"text":"account", "options":current_user.get("authorizations").kippt.accounts(), "datatype":"account"},
      {"text":"list", "src":"account.places", "options":[{"text":"Loading...","value":""}]}
    ]},
    {"text":"URL", "params":[
      {"text":"address", "placeholder":"http://example.com"},
      {"text":"method", "options":["POST","GET"]}
    ]}
  ]
