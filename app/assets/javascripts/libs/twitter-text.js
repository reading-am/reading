define(function(){ var twttr={};(function(){function b(a,b){return b=b||"",typeof a!="string"&&(a.global&&b.indexOf("g")<0&&(b+="g"),a.ignoreCase&&b.indexOf("i")<0&&(b+="i"),a.multiline&&b.indexOf("m")<0&&(b+="m"),a=a.source),new RegExp(a.replace(/#\{(\w+)\}/g,function(a,b){var c=twttr.txt.regexen[b]||"";return typeof c!="string"&&(c=c.source),c}),b)}function c(a,b){return a.replace(/#\{(\w+)\}/g,function(a,c){return b[c]||""})}function d(a,b,c){var d=String.fromCharCode(b);return c!==b&&(d+="-"+String.fromCharCode(c)),a.push(d),a}function q(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function u(a,b,c){return c?!a||a.match(b)&&RegExp["$&"]===a:typeof a=="string"&&a.match(b)&&RegExp["$&"]===a}twttr.txt={},twttr.txt.regexen={};var a={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};twttr.txt.htmlEscape=function(b){return b&&b.replace(/[&"'><]/g,function(b){return a[b]})};var e=String.fromCharCode,f=[e(32),e(133),e(160),e(5760),e(6158),e(8232),e(8233),e(8239),e(8287),e(12288)];d(f,9,13),d(f,8192,8202);var g=[e(65534),e(65279),e(65535)];d(g,8234,8238),twttr.txt.regexen.spaces_group=b(f.join("")),twttr.txt.regexen.spaces=b("["+f.join("")+"]"),twttr.txt.regexen.invalid_chars_group=b(g.join("")),twttr.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;var h=[];d(h,1024,1279),d(h,1280,1319),d(h,11744,11775),d(h,42560,42655),d(h,1425,1471),d(h,1473,1474),d(h,1476,1477),d(h,1479,1479),d(h,1488,1514),d(h,1520,1524),d(h,64274,64296),d(h,64298,64310),d(h,64312,64316),d(h,64318,64318),d(h,64320,64321),d(h,64323,64324),d(h,64326,64335),d(h,1552,1562),d(h,1568,1631),d(h,1646,1747),d(h,1749,1756),d(h,1758,1768),d(h,1770,1775),d(h,1786,1788),d(h,1791,1791),d(h,1872,1919),d(h,2208,2208),d(h,2210,2220),d(h,2276,2302),d(h,64336,64433),d(h,64467,64829),d(h,64848,64911),d(h,64914,64967),d(h,65008,65019),d(h,65136,65140),d(h,65142,65276),d(h,8204,8204),d(h,3585,3642),d(h,3648,3662),d(h,4352,4607),d(h,12592,12677),d(h,43360,43391),d(h,44032,55215),d(h,55216,55295),d(h,65441,65500),d(h,12449,12538),d(h,12540,12542),d(h,65382,65439),d(h,65392,65392),d(h,65296,65305),d(h,65313,65338),d(h,65345,65370),d(h,12353,12438),d(h,12441,12446),d(h,13312,19903),d(h,19968,40959),d(h,173824,177983),d(h,177984,178207),d(h,194560,195103),d(h,12291,12291),d(h,12293,12293),d(h,12347,12347),twttr.txt.regexen.nonLatinHashtagChars=b(h.join(""));var i=[];d(i,192,214),d(i,216,246),d(i,248,255),d(i,256,591),d(i,595,596),d(i,598,599),d(i,601,601),d(i,603,603),d(i,611,611),d(i,616,616),d(i,623,623),d(i,626,626),d(i,649,649),d(i,651,651),d(i,699,699),d(i,7680,7935),twttr.txt.regexen.latinAccentChars=b(i.join("")),twttr.txt.regexen.hashSigns=/[#＃]/,twttr.txt.regexen.hashtagAlpha=b(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),twttr.txt.regexen.hashtagAlphaNumeric=b(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),twttr.txt.regexen.endHashtagMatch=b(/^(?:#{hashSigns}|:\/\/)/),twttr.txt.regexen.hashtagBoundary=b(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),twttr.txt.regexen.validHashtag=b(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),twttr.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|RT:?)/,twttr.txt.regexen.atSigns=/[@＠]/,twttr.txt.regexen.validMentionOrList=b("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),twttr.txt.regexen.validReply=b(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),twttr.txt.regexen.endMentionMatch=b(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),twttr.txt.regexen.validUrlPrecedingChars=b(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,twttr.txt.regexen.invalidDomainChars=c("#{punct}#{spaces_group}#{invalid_chars_group}",twttr.txt.regexen),twttr.txt.regexen.validDomainChars=b(/[^#{invalidDomainChars}]/),twttr.txt.regexen.validSubdomain=b(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),twttr.txt.regexen.validDomainName=b(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),twttr.txt.regexen.validGTLD=b(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/),twttr.txt.regexen.validCCTLD=b(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))/),twttr.txt.regexen.validPunycode=b(/(?:xn--[0-9a-z]+)/),twttr.txt.regexen.validDomain=b(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),twttr.txt.regexen.validAsciiDomain=b(/(?:(?:[a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),twttr.txt.regexen.invalidShortDomain=b(/^#{validDomainName}#{validCCTLD}$/),twttr.txt.regexen.validPortNumber=b(/[0-9]+/),twttr.txt.regexen.validGeneralUrlPathChars=b(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~|&#{latinAccentChars}]/i),twttr.txt.regexen.validUrlBalancedParens=b(/\(#{validGeneralUrlPathChars}+\)/i),twttr.txt.regexen.validUrlPathEndingChars=b(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),twttr.txt.regexen.validUrlPath=b("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),twttr.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,twttr.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,twttr.txt.regexen.extractUrl=b("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),twttr.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,twttr.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,twttr.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,twttr.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,twttr.txt.regexen.validateUrlPchar=b("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),twttr.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,twttr.txt.regexen.validateUrlUserinfo=b("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),twttr.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,twttr.txt.regexen.validateUrlIpv4=b(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),twttr.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,twttr.txt.regexen.validateUrlIp=b("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),twttr.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,twttr.txt.regexen.validateUrlDomain=b(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),twttr.txt.regexen.validateUrlHost=b("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),twttr.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,twttr.txt.regexen.validateUrlUnicodeDomain=b(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),twttr.txt.regexen.validateUrlUnicodeHost=b("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),twttr.txt.regexen.validateUrlPort=/[0-9]{1,5}/,twttr.txt.regexen.validateUrlUnicodeAuthority=b("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),twttr.txt.regexen.validateUrlAuthority=b("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),twttr.txt.regexen.validateUrlPath=b(/(\/#{validateUrlPchar}*)*/i),twttr.txt.regexen.validateUrlQuery=b(/(#{validateUrlPchar}|\/|\?)*/i),twttr.txt.regexen.validateUrlFragment=b(/(#{validateUrlPchar}|\/|\?)*/i),twttr.txt.regexen.validateUrlUnencoded=b("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var j="tweet-url",k="list-slug",l="username",m="hashtag",n=' rel="nofollow"',o={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,suppressDataScreenName:!0,urlEntities:!0,before:!0},p={disabled:!0,readonly:!0,multiple:!0,checked:!0};twttr.txt.linkToHashtag=function(a,b,d){var e={hash:b.substring(a.indices[0],a.indices[0]+1),preText:"",text:twttr.txt.htmlEscape(a.hashtag),postText:"",extraHtml:d.suppressNoFollow?"":n};for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);return c('#{before}<a href="#{hashtagUrlBase}#{text}" title="##{text}" class="#{urlClass} #{hashtagClass}"#{extraHtml}>#{hash}#{preText}#{text}#{postText}</a>',e)},twttr.txt.linkToMentionAndList=function(a,b,d){var e=b.substring(a.indices[0],a.indices[0]+1),f={at:d.usernameIncludeSymbol?"":e,at_before_user:d.usernameIncludeSymbol?e:"",user:twttr.txt.htmlEscape(a.screenName),slashListname:twttr.txt.htmlEscape(a.listSlug),extraHtml:d.suppressNoFollow?"":n,preChunk:"",postChunk:""};for(var g in d)d.hasOwnProperty(g)&&(f[g]=d[g]);if(a.listSlug&&!d.suppressLists){var h=f.chunk=c("#{user}#{slashListname}",f);return f.list=twttr.txt.htmlEscape(h.toLowerCase()),c('#{before}#{at}<a class="#{urlClass} #{listClass}" href="#{listUrlBase}#{list}"#{extraHtml}>#{preChunk}#{at_before_user}#{chunk}#{postChunk}</a>',f)}return f.chunk=f.user,f.dataScreenName=d.suppressDataScreenName?"":c('data-screen-name="#{chunk}" ',f),c('#{before}#{at}<a class="#{urlClass} #{usernameClass}" #{dataScreenName}href="#{usernameUrlBase}#{chunk}"#{extraHtml}>#{preChunk}#{at_before_user}#{chunk}#{postChunk}</a>',f)},twttr.txt.linkToUrl=function(a,b,d){var e=a.url,f=e,g=twttr.txt.htmlEscape(f);if(d.urlEntities&&d.urlEntities[e]&&d.urlEntities[e].display_url){var f=d.urlEntities[e].display_url,h=d.urlEntities[e].expanded_url;d.title||(d.title=h);var i=f.replace(/…/g,"");if(h.indexOf(i)!=-1){var j=h.indexOf(i),k={displayUrlSansEllipses:i,beforeDisplayUrl:h.substr(0,j),afterDisplayUrl:h.substr(j+i.length),precedingEllipsis:f.match(/^…/)?"…":"",followingEllipsis:f.match(/…$/)?"…":""};$.each(k,function(a,b){k[a]=twttr.txt.htmlEscape(b)}),k.invisible=d.invisibleTagAttrs,g=c("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",k)}else g=f}var l={htmlAttrs:d.htmlAttrs,url:twttr.txt.htmlEscape(e),linkText:g};return c('<a href="#{url}"#{htmlAttrs}>#{linkText}</a>',l)},twttr.txt.autoLinkEntities=function(a,b,c){c=q(c||{}),c.suppressNoFollow||(c.rel="nofollow"),c.urlClass&&(c["class"]=c.urlClass),c.urlClass=c.urlClass||j,c.hashtagClass=c.hashtagClass||m,c.hashtagUrlBase=c.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",c.listClass=c.listClass||k,c.usernameClass=c.usernameClass||l,c.usernameUrlBase=c.usernameUrlBase||"https://twitter.com/",c.listUrlBase=c.listUrlBase||"https://twitter.com/",c.before=c.before||"",c.htmlAttrs=twttr.txt.extractHtmlAttrsFromOptions(c),c.invisibleTagAttrs=c.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var d,e,f;if(c.urlEntities){d={};for(e=0,f=c.urlEntities.length;e<f;e++)d[c.urlEntities[e].url]=c.urlEntities[e];c.urlEntities=d}var g="",h=0;for(var e=0;e<b.length;e++){var i=b[e];g+=a.substring(h,i.indices[0]),i.url?g+=twttr.txt.linkToUrl(i,a,c):i.hashtag?g+=twttr.txt.linkToHashtag(i,a,c):i.screenName&&(g+=twttr.txt.linkToMentionAndList(i,a,c)),h=i.indices[1]}return g+=a.substring(h,a.length),g},twttr.txt.extractHtmlAttrsFromOptions=function(a){var b="";for(var d in a){var e=a[d];if(o[d])continue;p[d]&&(e=e?d:null);if(e==null)continue;b+=c(' #{k}="#{v}" ',{k:twttr.txt.htmlEscape(d),v:twttr.txt.htmlEscape(e.toString())})}return b},twttr.txt.autoLink=function(a,b){var c=twttr.txt.extractEntitiesWithIndices(a,{extractUrlWithoutProtocol:!1});return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkUsernamesOrLists=function(a,b){var c=twttr.txt.extractMentionsOrListsWithIndices(a);return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkHashtags=function(a,b){var c=twttr.txt.extractHashtagsWithIndices(a);return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.autoLinkUrlsCustom=function(a,b){var c=twttr.txt.extractUrlsWithIndices(a,{extractUrlWithoutProtocol:!1});return twttr.txt.autoLinkEntities(a,c,b)},twttr.txt.removeOverlappingEntities=function(a){a.sort(function(a,b){return a.indices[0]-b.indices[0]});var b=a[0];for(var c=1;c<a.length;c++)b.indices[1]>a[c].indices[0]?(a.splice(c,1),c--):b=a[c]},twttr.txt.extractEntitiesWithIndices=function(a,b){var c=twttr.txt.extractUrlsWithIndices(a,b).concat(twttr.txt.extractMentionsOrListsWithIndices(a)).concat(twttr.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:!1}));return c.length==0?[]:(twttr.txt.removeOverlappingEntities(c),c)},twttr.txt.extractMentions=function(a){var b=[],c=twttr.txt.extractMentionsWithIndices(a);for(var d=0;d<c.length;d++){var e=c[d].screenName;b.push(e)}return b},twttr.txt.extractMentionsWithIndices=function(a){var b=[],c=twttr.txt.extractMentionsOrListsWithIndices(a);for(var d=0;d<c.length;d++)mentionOrList=c[d],mentionOrList.listSlug==""&&b.push({screenName:mentionOrList.screenName,indices:mentionOrList.indices});return b},twttr.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(twttr.txt.regexen.atSigns))return[];var b=[],c=0;return a.replace(twttr.txt.regexen.validMentionOrList,function(d,e,f,g,h,i,j){var k=j.slice(i+d.length);if(!k.match(twttr.txt.regexen.endMentionMatch)){h=h||"";var l=a.indexOf(f+g+h,c);c=l+g.length+h.length+1,b.push({screenName:g,listSlug:h,indices:[l,c]})}}),b},twttr.txt.extractReplies=function(a){if(!a)return null;var b=a.match(twttr.txt.regexen.validReply);return!b||RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)?null:b[1]},twttr.txt.extractUrls=function(a,b){var c=[],d=twttr.txt.extractUrlsWithIndices(a,b);for(var e=0;e<d.length;e++)c.push(d[e].url);return c},twttr.txt.extractUrlsWithIndices=function(a,b){b||(b={extractUrlsWithoutProtocol:!0});if(!a||(b.extractUrlsWithoutProtocol?!a.match(/\./):!a.match(/:/)))return[];var c=[];while(twttr.txt.regexen.extractUrl.exec(a)){var d=RegExp.$2,e=RegExp.$3,f=RegExp.$4,g=RegExp.$5,h=RegExp.$7,i=twttr.txt.regexen.extractUrl.lastIndex,j=i-e.length;if(!f){if(!b.extractUrlsWithoutProtocol||d.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var k=null,l=!1,m=0;g.replace(twttr.txt.regexen.validAsciiDomain,function(a){var b=g.indexOf(a,m);m=b+a.length,k={url:a,indices:[j+b,j+m]},l=a.match(twttr.txt.regexen.invalidShortDomain),l||c.push(k)});if(k==null)continue;h&&(l&&c.push(k),k.url=e.replace(g,k.url),k.indices[1]=i)}else e.match(twttr.txt.regexen.validTcoUrl)&&(e=RegExp.lastMatch,i=j+e.length),c.push({url:e,indices:[j,i]})}return c},twttr.txt.extractHashtags=function(a){var b=[],c=twttr.txt.extractHashtagsWithIndices(a);for(var d=0;d<c.length;d++)b.push(c[d].hashtag);return b},twttr.txt.extractHashtagsWithIndices=function(a,b){b||(b={checkUrlOverlap:!0});if(!a||!a.match(twttr.txt.regexen.hashSigns))return[];var c=[],d=0;a.replace(twttr.txt.regexen.validHashtag,function(b,e,f,g,h,i){var j=i.slice(h+b.length);if(j.match(twttr.txt.regexen.endHashtagMatch))return;var k=a.indexOf(f+g,d);d=k+g.length+1,c.push({hashtag:g,indices:[k,d]})});if(b.checkUrlOverlap){var e=twttr.txt.extractUrlsWithIndices(a);if(e.length>0){var f=c.concat(e);twttr.txt.removeOverlappingEntities(f),c=[];for(var g=0;g<f.length;g++)f[g].hashtag&&c.push(f[g])}}return c},twttr.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!1)},twttr.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!0)},twttr.txt.convertUnicodeIndices=function(a,b,c){if(b.length==0)return;var d=0,e=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});var f=0,g=b[0];while(d<a.length){if(g.indices[0]==(c?d:e)){var h=g.indices[1]-g.indices[0];g.indices[0]=c?e:d,g.indices[1]=g.indices[0]+h,f++;if(f==b.length)break;g=b[f]}var i=a.charCodeAt(d);55296<=i&&i<=56319&&d<a.length-1&&(i=a.charCodeAt(d+1),56320<=i&&i<=57343&&d++),e++,d++}},twttr.txt.splitTags=function(a){var b=a.split("<"),c,d=[],e;for(var f=0;f<b.length;f+=1){e=b[f];if(!e)d.push("");else{c=e.split(">");for(var g=0;g<c.length;g+=1)d.push(c[g])}}return d},twttr.txt.hitHighlight=function(a,b,c){var d="em";b=b||[],c=c||{};if(b.length===0)return a;var e=c.tag||d,f=["<"+e+">","</"+e+">"],g=twttr.txt.splitTags(a),h,i,j="",k=0,l=g[0],m=0,n=0,o=!1,p=l,q=[],r,s,t,u,v;for(h=0;h<b.length;h+=1)for(i=0;i<b[h].length;i+=1)q.push(b[h][i]);for(r=0;r<q.length;r+=1){s=q[r],t=f[r%2],u=!1;while(l!=null&&s>=m+l.length)j+=p.slice(n),o&&s===m+p.length&&(j+=t,u=!0),g[k+1]&&(j+="<"+g[k+1]+">"),m+=p.length,n=0,k+=2,l=g[k],p=l,o=!1;!u&&l!=null?(v=s-m,j+=p.slice(n,v)+t,n=v,r%2===0?o=!0:o=!1):u||(u=!0,j+=t)}if(l!=null){n<p.length&&(j+=p.slice(n));for(r=k+1;r<g.length;r+=1)j+=r%2===0?g[r]:"<"+g[r]+">"}return j};var r=140,s=[e(65534),e(65279),e(65535),e(8234),e(8235),e(8236),e(8237),e(8238)];twttr.txt.isInvalidTweet=function(a){if(!a)return"empty";if(a.length>r)return"too_long";for(var b=0;b<s.length;b++)if(a.indexOf(s[b])>=0)return"invalid_characters";return!1},twttr.txt.isValidTweetText=function(a){return!twttr.txt.isInvalidTweet(a)},twttr.txt.isValidUsername=function(a){if(!a)return!1;var b=twttr.txt.extractMentions(a);return b.length===1&&b[0]===a.slice(1)};var t=b(/^#{validMentionOrList}$/);twttr.txt.isValidList=function(a){var b=a.match(t);return!!b&&b[1]==""&&!!b[4]},twttr.txt.isValidHashtag=function(a){if(!a)return!1;var b=twttr.txt.extractHashtags(a);return b.length===1&&b[0]===a.slice(1)},twttr.txt.isValidUrl=function(a,b,c){b==null&&(b=!0),c==null&&(c=!0);if(!a)return!1;var d=a.match(twttr.txt.regexen.validateUrlUnencoded);if(!d||d[0]!==a)return!1;var e=d[1],f=d[2],g=d[3],h=d[4],i=d[5];return(!c||u(e,twttr.txt.regexen.validateUrlScheme)&&e.match(/^https?$/i))&&u(g,twttr.txt.regexen.validateUrlPath)&&u(h,twttr.txt.regexen.validateUrlQuery,!0)&&u(i,twttr.txt.regexen.validateUrlFragment,!0)?b&&u(f,twttr.txt.regexen.validateUrlUnicodeAuthority)||!b&&u(f,twttr.txt.regexen.validateUrlAuthority):!1},typeof module!="undefined"&&module.exports&&(module.exports=twttr.txt)})();return twttr.txt});
